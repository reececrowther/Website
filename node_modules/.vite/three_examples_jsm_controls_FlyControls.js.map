{
  "version": 3,
  "sources": ["../three/examples/jsm/controls/FlyControls.js"],
  "sourcesContent": ["import {\n\tEventDispatcher,\n\tQuaternion,\n\tVector3\n} from 'three';\n\nconst _changeEvent = { type: 'change' };\n\nclass FlyControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tif ( domElement === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.FlyControls: The second parameter \"domElement\" is now mandatory.' );\n\t\t\tdomElement = document;\n\n\t\t}\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\n\t\t// API\n\n\t\tthis.movementSpeed = 1.0;\n\t\tthis.rollSpeed = 0.005;\n\n\t\tthis.dragToLook = false;\n\t\tthis.autoForward = false;\n\n\t\t// disable default target object behavior\n\n\t\t// internals\n\n\t\tconst scope = this;\n\n\t\tconst EPS = 0.000001;\n\n\t\tconst lastQuaternion = new Quaternion();\n\t\tconst lastPosition = new Vector3();\n\n\t\tthis.tmpQuaternion = new Quaternion();\n\n\t\tthis.mouseStatus = 0;\n\n\t\tthis.moveState = { up: 0, down: 0, left: 0, right: 0, forward: 0, back: 0, pitchUp: 0, pitchDown: 0, yawLeft: 0, yawRight: 0, rollLeft: 0, rollRight: 0 };\n\t\tthis.moveVector = new Vector3( 0, 0, 0 );\n\t\tthis.rotationVector = new Vector3( 0, 0, 0 );\n\n\t\tthis.keydown = function ( event ) {\n\n\t\t\tif ( event.altKey ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t//event.preventDefault();\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase 'ShiftLeft':\n\t\t\t\tcase 'ShiftRight': this.movementSpeedMultiplier = .1; break;\n\n\t\t\t\tcase 'KeyW': this.moveState.forward = 1; break;\n\t\t\t\tcase 'KeyS': this.moveState.back = 1; break;\n\n\t\t\t\tcase 'KeyA': this.moveState.left = 1; break;\n\t\t\t\tcase 'KeyD': this.moveState.right = 1; break;\n\n\t\t\t\tcase 'KeyR': this.moveState.up = 1; break;\n\t\t\t\tcase 'KeyF': this.moveState.down = 1; break;\n\n\t\t\t\tcase 'ArrowUp': this.moveState.pitchUp = 1; break;\n\t\t\t\tcase 'ArrowDown': this.moveState.pitchDown = 1; break;\n\n\t\t\t\tcase 'ArrowLeft': this.moveState.yawLeft = 1; break;\n\t\t\t\tcase 'ArrowRight': this.moveState.yawRight = 1; break;\n\n\t\t\t\tcase 'KeyQ': this.moveState.rollLeft = 1; break;\n\t\t\t\tcase 'KeyE': this.moveState.rollRight = 1; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\t\t\tthis.updateRotationVector();\n\n\t\t};\n\n\t\tthis.keyup = function ( event ) {\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase 'ShiftLeft':\n\t\t\t\tcase 'ShiftRight': this.movementSpeedMultiplier = 1; break;\n\n\t\t\t\tcase 'KeyW': this.moveState.forward = 0; break;\n\t\t\t\tcase 'KeyS': this.moveState.back = 0; break;\n\n\t\t\t\tcase 'KeyA': this.moveState.left = 0; break;\n\t\t\t\tcase 'KeyD': this.moveState.right = 0; break;\n\n\t\t\t\tcase 'KeyR': this.moveState.up = 0; break;\n\t\t\t\tcase 'KeyF': this.moveState.down = 0; break;\n\n\t\t\t\tcase 'ArrowUp': this.moveState.pitchUp = 0; break;\n\t\t\t\tcase 'ArrowDown': this.moveState.pitchDown = 0; break;\n\n\t\t\t\tcase 'ArrowLeft': this.moveState.yawLeft = 0; break;\n\t\t\t\tcase 'ArrowRight': this.moveState.yawRight = 0; break;\n\n\t\t\t\tcase 'KeyQ': this.moveState.rollLeft = 0; break;\n\t\t\t\tcase 'KeyE': this.moveState.rollRight = 0; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\t\t\tthis.updateRotationVector();\n\n\t\t};\n\n\t\tthis.mousedown = function ( event ) {\n\n\t\t\tif ( this.domElement !== document ) {\n\n\t\t\t\tthis.domElement.focus();\n\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( this.dragToLook ) {\n\n\t\t\t\tthis.mouseStatus ++;\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( event.button ) {\n\n\t\t\t\t\tcase 0: this.moveState.forward = 1; break;\n\t\t\t\t\tcase 2: this.moveState.back = 1; break;\n\n\t\t\t\t}\n\n\t\t\t\tthis.updateMovementVector();\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.mousemove = function ( event ) {\n\n\t\t\tif ( ! this.dragToLook || this.mouseStatus > 0 ) {\n\n\t\t\t\tconst container = this.getContainerDimensions();\n\t\t\t\tconst halfWidth = container.size[ 0 ] / 2;\n\t\t\t\tconst halfHeight = container.size[ 1 ] / 2;\n\n\t\t\t\tthis.moveState.yawLeft = - ( ( event.pageX - container.offset[ 0 ] ) - halfWidth ) / halfWidth;\n\t\t\t\tthis.moveState.pitchDown = ( ( event.pageY - container.offset[ 1 ] ) - halfHeight ) / halfHeight;\n\n\t\t\t\tthis.updateRotationVector();\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.mouseup = function ( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( this.dragToLook ) {\n\n\t\t\t\tthis.mouseStatus --;\n\n\t\t\t\tthis.moveState.yawLeft = this.moveState.pitchDown = 0;\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( event.button ) {\n\n\t\t\t\t\tcase 0: this.moveState.forward = 0; break;\n\t\t\t\t\tcase 2: this.moveState.back = 0; break;\n\n\t\t\t\t}\n\n\t\t\t\tthis.updateMovementVector();\n\n\t\t\t}\n\n\t\t\tthis.updateRotationVector();\n\n\t\t};\n\n\t\tthis.update = function ( delta ) {\n\n\t\t\tconst moveMult = delta * scope.movementSpeed;\n\t\t\tconst rotMult = delta * scope.rollSpeed;\n\n\t\t\tscope.object.translateX( scope.moveVector.x * moveMult );\n\t\t\tscope.object.translateY( scope.moveVector.y * moveMult );\n\t\t\tscope.object.translateZ( scope.moveVector.z * moveMult );\n\n\t\t\tscope.tmpQuaternion.set( scope.rotationVector.x * rotMult, scope.rotationVector.y * rotMult, scope.rotationVector.z * rotMult, 1 ).normalize();\n\t\t\tscope.object.quaternion.multiply( scope.tmpQuaternion );\n\n\t\t\tif (\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS\n\t\t\t) {\n\n\t\t\t\tscope.dispatchEvent( _changeEvent );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tlastPosition.copy( scope.object.position );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.updateMovementVector = function () {\n\n\t\t\tconst forward = ( this.moveState.forward || ( this.autoForward && ! this.moveState.back ) ) ? 1 : 0;\n\n\t\t\tthis.moveVector.x = ( - this.moveState.left + this.moveState.right );\n\t\t\tthis.moveVector.y = ( - this.moveState.down + this.moveState.up );\n\t\t\tthis.moveVector.z = ( - forward + this.moveState.back );\n\n\t\t\t//console.log( 'move:', [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\n\n\t\t};\n\n\t\tthis.updateRotationVector = function () {\n\n\t\t\tthis.rotationVector.x = ( - this.moveState.pitchDown + this.moveState.pitchUp );\n\t\t\tthis.rotationVector.y = ( - this.moveState.yawRight + this.moveState.yawLeft );\n\t\t\tthis.rotationVector.z = ( - this.moveState.rollRight + this.moveState.rollLeft );\n\n\t\t\t//console.log( 'rotate:', [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\n\n\t\t};\n\n\t\tthis.getContainerDimensions = function () {\n\n\t\t\tif ( this.domElement != document ) {\n\n\t\t\t\treturn {\n\t\t\t\t\tsize: [ this.domElement.offsetWidth, this.domElement.offsetHeight ],\n\t\t\t\t\toffset: [ this.domElement.offsetLeft, this.domElement.offsetTop ]\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\treturn {\n\t\t\t\t\tsize: [ window.innerWidth, window.innerHeight ],\n\t\t\t\t\toffset: [ 0, 0 ]\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu );\n\t\t\tthis.domElement.removeEventListener( 'mousedown', _mousedown );\n\t\t\tthis.domElement.removeEventListener( 'mousemove', _mousemove );\n\t\t\tthis.domElement.removeEventListener( 'mouseup', _mouseup );\n\n\t\t\twindow.removeEventListener( 'keydown', _keydown );\n\t\t\twindow.removeEventListener( 'keyup', _keyup );\n\n\t\t};\n\n\t\tconst _mousemove = this.mousemove.bind( this );\n\t\tconst _mousedown = this.mousedown.bind( this );\n\t\tconst _mouseup = this.mouseup.bind( this );\n\t\tconst _keydown = this.keydown.bind( this );\n\t\tconst _keyup = this.keyup.bind( this );\n\n\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu );\n\n\t\tthis.domElement.addEventListener( 'mousemove', _mousemove );\n\t\tthis.domElement.addEventListener( 'mousedown', _mousedown );\n\t\tthis.domElement.addEventListener( 'mouseup', _mouseup );\n\n\t\twindow.addEventListener( 'keydown', _keydown );\n\t\twindow.addEventListener( 'keyup', _keyup );\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t}\n\n}\n\nfunction contextmenu( event ) {\n\n\tevent.preventDefault();\n\n}\n\nexport { FlyControls };\n"],
  "mappings": "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",
  "names": []
}
